//Jquery plugins
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],function($){return factory($)})}else if(typeof module==="object"&&typeof module.exports==="object"){exports=factory(require("jquery"))}else{factory(jQuery)}})(function($){$.easing.jswing=$.easing.swing;var pow=Math.pow,sqrt=Math.sqrt,sin=Math.sin,cos=Math.cos,PI=Math.PI,c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*PI/3,c5=2*PI/4.5;function bounceOut(x){var n1=7.5625,d1=2.75;if(x<1/d1){return n1*x*x}else if(x<2/d1){return n1*(x-=1.5/d1)*x+.75}else if(x<2.5/d1){return n1*(x-=2.25/d1)*x+.9375}else{return n1*(x-=2.625/d1)*x+.984375}}$.extend($.easing,{def:"easeOutQuad",swing:function(x){return $.easing[$.easing.def](x)},easeInQuad:function(x){return x*x},easeOutQuad:function(x){return 1-(1-x)*(1-x)},easeInOutQuad:function(x){return x<.5?2*x*x:1-pow(-2*x+2,2)/2},easeInCubic:function(x){return x*x*x},easeOutCubic:function(x){return 1-pow(1-x,3)},easeInOutCubic:function(x){return x<.5?4*x*x*x:1-pow(-2*x+2,3)/2},easeInQuart:function(x){return x*x*x*x},easeOutQuart:function(x){return 1-pow(1-x,4)},easeInOutQuart:function(x){return x<.5?8*x*x*x*x:1-pow(-2*x+2,4)/2},easeInQuint:function(x){return x*x*x*x*x},easeOutQuint:function(x){return 1-pow(1-x,5)},easeInOutQuint:function(x){return x<.5?16*x*x*x*x*x:1-pow(-2*x+2,5)/2},easeInSine:function(x){return 1-cos(x*PI/2)},easeOutSine:function(x){return sin(x*PI/2)},easeInOutSine:function(x){return-(cos(PI*x)-1)/2},easeInExpo:function(x){return x===0?0:pow(2,10*x-10)},easeOutExpo:function(x){return x===1?1:1-pow(2,-10*x)},easeInOutExpo:function(x){return x===0?0:x===1?1:x<.5?pow(2,20*x-10)/2:(2-pow(2,-20*x+10))/2},easeInCirc:function(x){return 1-sqrt(1-pow(x,2))},easeOutCirc:function(x){return sqrt(1-pow(x-1,2))},easeInOutCirc:function(x){return x<.5?(1-sqrt(1-pow(2*x,2)))/2:(sqrt(1-pow(-2*x+2,2))+1)/2},easeInElastic:function(x){return x===0?0:x===1?1:-pow(2,10*x-10)*sin((x*10-10.75)*c4)},easeOutElastic:function(x){return x===0?0:x===1?1:pow(2,-10*x)*sin((x*10-.75)*c4)+1},easeInOutElastic:function(x){return x===0?0:x===1?1:x<.5?-(pow(2,20*x-10)*sin((20*x-11.125)*c5))/2:pow(2,-20*x+10)*sin((20*x-11.125)*c5)/2+1},easeInBack:function(x){return c3*x*x*x-c1*x*x},easeOutBack:function(x){return 1+c3*pow(x-1,3)+c1*pow(x-1,2)},easeInOutBack:function(x){return x<.5?pow(2*x,2)*((c2+1)*2*x-c2)/2:(pow(2*x-2,2)*((c2+1)*(x*2-2)+c2)+2)/2},easeInBounce:function(x){return 1-bounceOut(1-x)},easeOutBounce:bounceOut,easeInOutBounce:function(x){return x<.5?(1-bounceOut(1-2*x))/2:(1+bounceOut(2*x-1))/2}})});

!function(t){"use strict";var i=function(i,n){return this.$el=t(i),this.cb=n,this.watch(),this};i.prototype={isIn:function(){var i=this,n=t(window),e=i.$el.offset().top,o=e+i.$el.outerHeight(),r=n.scrollTop(),s=r+n.height();return o>r&&e<s},watch:function(){var i=this,n=!1;t(window).on("resize scroll",function(){i.isIn()&&!1===n&&(i.cb.call(i.$el,"entered"),n=!0),!0!==n||i.isIn()||(i.cb.call(i.$el,"leaved"),n=!1)})}},t.fn.isInViewport=function(n){return this.each(function(){var e=t(this);e.data("isInViewport")||e.data("isInViewport",new i(this,n))})}}(window.jQuery);

//chartjs plugins
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):e(t.Chart)}(this,function(l){"use strict";var t=(l=l&&l.hasOwnProperty("default")?l.default:l).helpers,i=function(){this._rect=null,this._rotation=0};t.extend(i.prototype,{update:function(t,e,n){var a=t.x,r=t.y,i=a+e.x,o=r+e.y;this._rotation=n,this._rect={x0:i-1,y0:o-1,x1:i+e.w+2,y1:o+e.h+2,cx:a,cy:r}},contains:function(t,e){var n,a,r,i,o,l=this._rect;return!!l&&(n=l.cx,a=l.cy,r=this._rotation,i=n+(t-n)*Math.cos(r)+(e-a)*Math.sin(r),o=a-(t-n)*Math.sin(r)+(e-a)*Math.cos(r),!(i<l.x0||o<l.y0||i>l.x1||o>l.y1))}});var r=l.helpers,e="undefined"!=typeof window?window.devicePixelRatio:1,v={toTextLines:function(t){var e,n=[];for(t=[].concat(t);t.length;)"string"==typeof(e=t.pop())?n.unshift.apply(n,e.split("\n")):Array.isArray(e)?t.push.apply(t,e):r.isNullOrUndef(t)||n.unshift(""+e);return n},toFontString:function(t){return!t||r.isNullOrUndef(t.size)||r.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,n){var a,r=[].concat(e),i=r.length,o=t.font,l=0;for(t.font=n.string,a=0;a<i;++a)l=Math.max(t.measureText(r[a]).width,l);return t.font=o,{height:i*n.lineHeight,width:l}},parseFont:function(t){var e=l.defaults.global,n=r.valueOrDefault(t.size,e.defaultFontSize),a={family:r.valueOrDefault(t.family,e.defaultFontFamily),lineHeight:r.options.toLineHeight(t.lineHeight,n),size:n,style:r.valueOrDefault(t.style,e.defaultFontStyle),weight:r.valueOrDefault(t.weight,null),string:""};return a.string=v.toFontString(a),a},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},arrayDiff:function(t,e){var n,a,r,i,o=t.slice(),l=[];for(n=0,r=e.length;n<r;++n)i=e[n],-1===(a=o.indexOf(i))?l.push([i,1]):o.splice(a,1);for(n=0,r=o.length;n<r;++n)l.push([o[n],-1]);return l},rasterize:function(t){return Math.round(t*e)/e}};function u(t,e){var n=e.x,a=e.y;if(null===n)return{x:0,y:-1};if(null===a)return{x:1,y:0};var r=t.x-n,i=t.y-a,o=Math.sqrt(r*r+i*i);return{x:o?r/o:0,y:o?i/o:-1}}function f(t,e,n,a,r){switch(r){case"center":n=a=0;break;case"bottom":n=0,a=1;break;case"right":n=1,a=0;break;case"left":n=-1,a=0;break;case"top":n=0,a=-1;break;case"start":n=-n,a=-a;break;case"end":break;default:r*=Math.PI/180,n=Math.cos(r),a=Math.sin(r)}return{x:t,y:e,vx:n,vy:a}}var s=function(t,e,n){var a,r=(t.startAngle+t.endAngle)/2,i=Math.cos(r),o=Math.sin(r),l=t.innerRadius,s=t.outerRadius;return a="start"===e?l:"end"===e?s:(l+s)/2,f(t.x+i*a,t.y+o*a,i,o,n)},d=function(t,e,n,a){var r=u(t,a),i=t.radius,o=0;return"start"===e?o=-i:"end"===e&&(o=i),f(t.x+r.x*o,t.y+r.y*o,r.x,r.y,n)},c=function(t,e,n,a){var r=t.horizontal,i=Math.abs(t.base-(r?t.x:t.y)),o=r?Math.min(t.x,t.base):t.x,l=r?t.y:Math.min(t.y,t.base),s=u(t,a);return"center"===e?r?o+=i/2:l+=i/2:"start"!==e||r?"end"===e&&r&&(o+=i):l+=i,f(o,l,s.x,s.y,n)},h=function(t,e,n,a){var r=u(t,a);return f(t.x,t.y,r.x,r.y,n)},b=l.helpers,m=v.rasterize;var p=function(t,e,n,a){var r=this;r._hitbox=new i,r._config=t,r._index=a,r._model=null,r._ctx=e,r._el=n};b.extend(p.prototype,{_modelize:function(t,e,n){var a,r=this._index,i=b.options.resolve,o=v.parseFont(i([e.font,{}],n,r));return{align:i([e.align,"center"],n,r),anchor:i([e.anchor,"center"],n,r),backgroundColor:i([e.backgroundColor,null],n,r),borderColor:i([e.borderColor,null],n,r),borderRadius:i([e.borderRadius,0],n,r),borderWidth:i([e.borderWidth,0],n,r),clip:i([e.clip,!1],n,r),color:i([e.color,l.defaults.global.defaultFontColor],n,r),font:o,lines:t,offset:i([e.offset,0],n,r),opacity:i([e.opacity,1],n,r),origin:function(t){var e=t._model.horizontal,n=t._scale||e&&t._xScale||t._yScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var a=n.getBasePixel();return e?{x:a,y:null}:{x:null,y:a}}(this._el),padding:b.options.toPadding(i([e.padding,0],n,r)),positioner:(a=this._el,a instanceof l.elements.Arc?s:a instanceof l.elements.Point?d:a instanceof l.elements.Rectangle?c:h),rotation:i([e.rotation,0],n,r)*(Math.PI/180),size:v.textSize(this._ctx,t,o),textAlign:i([e.textAlign,"start"],n,r)}},update:function(t){var e,n,a,r=null,i=this._index,o=this._config;b.options.resolve([o.display,!0],t,i)&&(e=t.dataset.data[i],n=b.valueOrDefault(b.callback(o.formatter,[e,t]),e),r=(a=b.isNullOrUndef(n)?[]:v.toTextLines(n)).length?this._modelize(a,o,t):null),this._model=r},draw:function(t){var e,n,a,r,i,o,l,s,u,f,d,c,h,y,x,g=t.ctx,p=this._model;p&&p.opacity&&(r=p.size,i=p.padding,o=r.height,l=r.width,u=-o/2,e={frame:{x:(s=-l/2)-i.left,y:u-i.top,w:l+i.width,h:o+i.height},text:{x:s,y:u,w:l,h:o}},n=function(t,e,n){var a=e.positioner(t._view,e.anchor,e.align,e.origin),r=a.vx,i=a.vy;if(!r&&!i)return{x:a.x,y:a.y};var o=e.borderWidth||0,l=n.w+2*o,s=n.h+2*o,u=e.rotation,f=Math.abs(l/2*Math.cos(u))+Math.abs(s/2*Math.sin(u)),d=Math.abs(l/2*Math.sin(u))+Math.abs(s/2*Math.cos(u)),c=1/Math.max(Math.abs(r),Math.abs(i));return f*=r*c,d*=i*c,f+=e.offset*r,d+=e.offset*i,{x:a.x+f,y:a.y+d}}(this._el,p,e.frame),this._hitbox.update(n,e.frame,p.rotation),g.save(),p.clip&&(a=t.chartArea,g.beginPath(),g.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),g.clip()),g.globalAlpha=v.bound(0,p.opacity,1),g.translate(m(n.x),m(n.y)),g.rotate(p.rotation),f=g,d=e.frame,h=(c=p).backgroundColor,y=c.borderColor,x=c.borderWidth,(h||y&&x)&&(f.beginPath(),b.canvas.roundedRect(f,m(d.x)-x/2,m(d.y)-x/2,m(d.w)+x,m(d.h)+x,c.borderRadius),f.closePath(),h&&(f.fillStyle=h,f.fill()),y&&x&&(f.strokeStyle=y,f.lineWidth=x,f.lineJoin="miter",f.stroke())),function(t,e,n,a){var r,i,o,l=a.textAlign,s=a.font.lineHeight,u=a.color,f=e.length;if(f&&u)for(r=n.x,i=n.y+s/2,"center"===l?r+=n.w/2:"end"!==l&&"right"!==l||(r+=n.w),t.font=a.font.string,t.fillStyle=u,t.textAlign=l,t.textBaseline="middle",o=0;o<f;++o)t.fillText(e[o],m(r),m(i),m(n.w)),i+=s}(g,p.lines,e.text,p),g.restore())},contains:function(t,e){return this._hitbox.contains(t,e)}});var o=l.helpers,n={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",formatter:function(t){if(o.isNullOrUndef(t))return null;var e,n,a,r=t;if(o.isObject(t))if(o.isNullOrUndef(t.label))if(o.isNullOrUndef(t.r))for(r="",a=0,n=(e=Object.keys(t)).length;a<n;++a)r+=(0!==a?", ":"")+e[a]+": "+t[e[a]];else r=t.r;else r=t.label;return""+r},listeners:{}},_=l.helpers,w="$datalabels";function a(t,e){var n,a,r=t.getDatasetMeta(e).data||[],i=r.length;for(n=0;n<i;++n)(a=r[n][w])&&a.draw(t)}function y(t,e,n){var a,r,i,o,l=t[w].labels;for(a=l.length-1;0<=a;--a)for(r=(i=l[a]||[]).length-1;0<=r;--r)if((o=i[r]).contains(e,n))return{dataset:a,label:o};return null}function x(t,e,n){var a=e&&e[n.dataset];if(a){var r=n.label,i=r.$context;!0===_.callback(a,[i])&&(t[w].dirty=!0,r.update(i))}}function g(t,e){var n,a,r=t[w],i=r.listeners;if(i.enter||i.leave){if("mousemove"===e.type)a=y(t,e.x,e.y);else if("mouseout"!==e.type)return;var o,l,s,u,f,d;n=r.hovered,r.hovered=a,o=t,l=i,u=a,((s=n)||u)&&(s?u?s.label!==u.label&&(d=f=!0):d=!0:f=!0,d&&x(o,l.leave,s),f&&x(o,l.enter,u))}}l.defaults.global.plugins.datalabels=n,l.defaults.global.plugins.datalabels=n,l.plugins.register({id:"datalabels",beforeInit:function(t){t[w]={actives:[]}},beforeUpdate:function(t){var e=t[w];e.listened=!1,e.listeners={},e.labels=[]},afterDatasetUpdate:function(t,a,e){var n,r,i,o,l,s=a.index,u=t[w],f=u.labels[s]=[],d=t.isDatasetVisible(s),c=t.data.datasets[s],h=(n=e,!1===(r=c.datalabels)?null:(!0===r&&(r={}),_.merge({},[n,r]))),y=a.meta.data||[],x=y.length,g=t.ctx;for(g.save(),i=0;i<x;++i)o=y[i],d&&o&&!o.hidden&&!o._model.skip?(f.push(l=new p(h,g,o,i)),l.update(l.$context={active:!1,chart:t,dataIndex:i,dataset:c,datasetIndex:s})):l=null,o[w]=l;g.restore(),_.merge(u.listeners,h.listeners||{},{merger:function(t,e,n){e[t]=e[t]||{},e[t][a.index]=n[t],u.listened=!0}})},afterDatasetsDraw:function(t){for(var e=0,n=t.data.datasets.length;e<n;++e)a(t,e)},beforeEvent:function(t,e){if(t[w].listened)switch(e.type){case"mousemove":case"mouseout":g(t,e);break;case"click":a=e,r=(n=t)[w].listeners.click,(i=r&&y(n,a.x,a.y))&&x(n,r,i)}var n,a,r,i},afterEvent:function(t){var e,n,a,r,i=t[w],o=i.actives,l=i.actives=t.lastActive||[],s=v.arrayDiff(o,l);for(e=0,n=s.length;e<n;++e)(a=s[e])[1]&&(r=a[0][w])&&(r.$context.active=1===a[1],r.update(r.$context));!i.dirty&&!s.length||t.animating||t.render(),delete i.dirty}})});

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):e(t.Chart)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var y,e,b,S,a;(y=t).Interaction.modes.interpolate=function(t,e,a){for(var s=[],i=0;i<t.data.datasets.length;i++)if(t.data.datasets[i].interpolate){var o=t.getDatasetMeta(i);if(!o.hidden){var r=t.scales[o.xAxisID],n=t.scales[o.yAxisID],l=r.getValueForPixel(e.x),c=t.data.datasets[i].data,d=c.findIndex(function(t){return t.x>=l});if(-1!==d){var h=c[d-1],x=c[d];if(h&&x)var u=(x.y-h.y)/(x.x-h.x),g=h.y+(l-h.x)*u;if(t.data.datasets[i].steppedLine&&h&&(g=h.y),!isNaN(g)){var p=n.getPixelForValue(g);if(!isNaN(p)){var m={value:g,xValue:l,tooltipPosition:function(){return this._model},hasValue:function(){return!0},_model:{x:e.x,y:p},_datasetIndex:i,_index:s.length,_xScale:{getLabelForIndex:function(t){return s[t].xValue}},_yScale:{getLabelForIndex:function(t){return s[t].value}}};s.push(m)}}}}}var f=y.Interaction.modes.x(t,e,a);for(d=0;d<f.length;d++){var v=f[d];t.data.datasets[v._datasetIndex].interpolate||s.push(v)}return s},b=(e=t).helpers,S={line:{color:"#F66",width:1},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},callbacks:{beforeZoom:function(t,e){return!0},afterZoom:function(t,e){}}},a={id:"crosshair",afterInit:function(a){if(a.config.options.scales!=undefined&&0!=a.config.options.scales.xAxes.length){var t=a.config.options.scales.xAxes[0].type;"linear"!==t&&"time"!==t||(void 0===a.options.plugins.crosshair&&(a.options.plugins.crosshair=S),a.crosshair={enabled:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,reset:function(){this.resetZoom(a,!1,!1)}.bind(this)},this.getOption(a,"sync","enabled")&&(a.crosshair.syncEventHandler=function(t){this.handleSyncEvent(a,t)}.bind(this),a.crosshair.resetZoomEventHandler=function(t){var e=this.getOption(a,"sync","group");t.chartId!==a.id&&t.syncGroup===e&&this.resetZoom(a,!0)}.bind(this),window.addEventListener("sync-event",a.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",a.crosshair.resetZoomEventHandler)),a.panZoom=this.panZoom.bind(this,a))}},destroy:function(t){this.getOption(t,"sync","enabled")&&(window.removeEventListener("sync-event",t.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",t.crosshair.resetZoomEventHandler))},panZoom:function(t,e){if(0!==t.crosshair.originalData.length){var a=t.crosshair.end-t.crosshair.start,s=t.crosshair.min,i=t.crosshair.max;e<0?(t.crosshair.start=Math.max(t.crosshair.start+e,s),t.crosshair.end=t.crosshair.start===s?s+a:t.crosshair.end+e):(t.crosshair.end=Math.min(t.crosshair.end+e,t.crosshair.max),t.crosshair.start=t.crosshair.end===i?i-a:t.crosshair.start+e),this.doZoom(t,t.crosshair.start,t.crosshair.end)}},getOption:function(t,e,a){return b.getValueOrDefault(t.options.plugins.crosshair[e]?t.options.plugins.crosshair[e][a]:void 0,S[e][a])},getXScale:function(t){return t.data.datasets.length?t.scales[t.getDatasetMeta(0).xAxisID]:null},getYScale:function(t){return t.scales[t.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(t,e){var a=this.getOption(t,"sync","group");if(e.chartId!==t.id&&e.syncGroup===a){var s=this.getXScale(t);if(s){var i=void 0===e.original.native.buttons?e.original.native.which:e.original.native.buttons;"mouseup"===e.original.type&&(i=0);var o={type:e.original.type,chart:t,x:s.getPixelForValue(e.xValue),y:e.original.y,native:{buttons:i},stop:!0};t.controller.eventHandler(o)}}},afterEvent:function(t,e){if(0!=t.config.options.scales.xAxes.length){var a=t.config.options.scales.xAxes[0].type;if("linear"===a||"time"===a){var s=this.getXScale(t);if(s){var i=void 0===e.native.buttons?e.native.which:e.native.buttons;"mouseup"===e.native.type&&(i=0);var o=this.getOption(t,"sync","enabled"),r=this.getOption(t,"sync","group");if(!e.stop&&o){var n=new CustomEvent("sync-event");n.chartId=t.id,n.syncGroup=r,n.original=e,n.xValue=s.getValueForPixel(e.x),window.dispatchEvent(n)}var l=this.getOption(t,"sync","suppressTooltips");if(t.crosshair.suppressTooltips=e.stop&&l,t.crosshair.enabled="mouseout"!==e.type&&e.x>s.getPixelForValue(s.min)&&e.x<s.getPixelForValue(s.max),!t.crosshair.enabled)return e.x>s.getPixelForValue(s.max)&&t.update(),!0;var c=this.getOption(t,"zoom","enabled");if(1===i&&!t.crosshair.dragStarted&&c&&(t.crosshair.dragStartX=e.x,t.crosshair.dragStarted=!0),t.crosshair.dragStarted&&0===i){t.crosshair.dragStarted=!1;var d=s.getValueForPixel(t.crosshair.dragStartX),h=s.getValueForPixel(t.crosshair.x);1<Math.abs(t.crosshair.dragStartX-t.crosshair.x)&&this.doZoom(t,d,h),t.update()}t.crosshair.x=e.x,t.draw()}}}},afterDraw:function(t){if(t.crosshair.enabled)return t.crosshair.dragStarted?this.drawZoombox(t):(this.drawTraceLine(t),this.interpolateValues(t),this.drawTracePoints(t)),!0},beforeTooltipDraw:function(t){return!t.crosshair.dragStarted&&!t.crosshair.suppressTooltips},resetZoom:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(a){for(var s=0;s<t.data.datasets.length;s++)t.data.datasets[s].data=t.crosshair.originalData.shift(0);var i="ticks";t.options.scales.xAxes[0].time&&(i="time"),t.crosshair.originalXRange.min?(t.options.scales.xAxes[0][i].min=t.crosshair.originalXRange.min,t.crosshair.originalXRange.min=null):delete t.options.scales.xAxes[0][i].min,t.crosshair.originalXRange.max?(t.options.scales.xAxes[0][i].max=t.crosshair.originalXRange.max,t.crosshair.originalXRange.max=null):delete t.options.scales.xAxes[0][i].max}t.crosshair.button&&t.crosshair.button.parentNode&&(t.crosshair.button.parentNode.removeChild(t.crosshair.button),t.crosshair.button=!1);var o=this.getOption(t,"sync","enabled");if(!e&&a&&o){var r=this.getOption(t,"sync","group"),n=new CustomEvent("reset-zoom-event");n.chartId=t.id,n.syncGroup=r,window.dispatchEvent(n)}if(a){var l=t.options.animation;t.options.animation=!1,t.update(),t.options.animation=l}},doZoom:function(t,e,a){if(a<e){var s=e;e=a,a=s}if(!b.getValueOrDefault(t.options.plugins.crosshair.callbacks?t.options.plugins.crosshair.callbacks.beforeZoom:void 0,S.callbacks.beforeZoom)(e,a))return!1;if("time"===t.options.scales.xAxes[0].type?(t.options.scales.xAxes[0].time.min&&0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.min=t.options.scales.xAxes[0].time.min),t.options.scales.xAxes[0].time.max&&0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.max=t.options.scales.xAxes[0].time.max)):(t.options.scales.xAxes[0].ticks.min&&void 0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.min=t.options.scales.xAxes[0].ticks.min),t.options.scales.xAxes[0].ticks.max&&void 0===t.crosshair.originalData.length&&(t.crosshair.originalXRange.max=t.options.scales.xAxes[0].ticks.max)),!t.crosshair.button){var i=document.createElement("button"),o=this.getOption(t,"zoom","zoomButtonText"),r=this.getOption(t,"zoom","zoomButtonClass"),n=document.createTextNode(o);i.appendChild(n),i.className=r,i.addEventListener("click",function(){this.resetZoom(t)}.bind(this)),t.canvas.parentNode.appendChild(i),t.crosshair.button=i}t.options.scales.xAxes[0].time?(t.options.scales.xAxes[0].time.min=e,t.options.scales.xAxes[0].time.max=a):(t.options.scales.xAxes[0].ticks.min=e,t.options.scales.xAxes[0].ticks.max=a);for(var l=0===t.crosshair.originalData.length,c=0;c<t.data.datasets.length;c++){var d=[],h=0,x=!1,u=!1;l&&(t.crosshair.originalData[c]=t.data.datasets[c].data);for(var g=t.crosshair.originalData[c],p=0;p<g.length;p++){var m=g[p],f=this.getXScale(t).getRightValue(m);e&&!x&&0<h&&(d.push(g[h-1]),x=!0),(f=e&&m.x<=a)&&d.push(m),a<f&&!u&&h<g.length&&(d.push(m),u=!0),h+=1}t.data.datasets[c].data=d}if(t.crosshair.start=e,t.crosshair.end=a,l){var v=this.getXScale(t);t.crosshair.min=v.min,t.crosshair.max=v.max}t.update(),this.getOption(t,"callbacks","afterZoom")(e,a)},drawZoombox:function(t){var e=this.getYScale(t),a=this.getOption(t,"zoom","zoomboxBorderColor"),s=this.getOption(t,"zoom","zoomboxBackgroundColor");t.ctx.beginPath(),t.ctx.rect(t.crosshair.dragStartX,e.getPixelForValue(e.max),t.crosshair.x-t.crosshair.dragStartX,e.getPixelForValue(e.min)-e.getPixelForValue(e.max)),t.ctx.lineWidth=1,t.ctx.strokeStyle=a,t.ctx.fillStyle=s,t.ctx.fill(),t.ctx.fillStyle="",t.ctx.stroke(),t.ctx.closePath()},drawTraceLine:function(t){var e=this.getYScale(t),a=this.getOption(t,"line","width"),s=this.getOption(t,"line","color");t.ctx.beginPath(),t.ctx.moveTo(t.crosshair.x,e.getPixelForValue(e.max)),t.ctx.lineWidth=a,t.ctx.strokeStyle=s,t.ctx.lineTo(t.crosshair.x,e.getPixelForValue(e.min)),t.ctx.stroke()},drawTracePoints:function(t){for(var e=0;e<t.data.datasets.length;e++){var a=t.data.datasets[e],s=t.getDatasetMeta(e),i=t.scales[s.yAxisID];!s.hidden&&a.interpolate&&(t.ctx.beginPath(),t.ctx.arc(t.crosshair.x,i.getPixelForValue(a.interpolatedValue),3,0,2*Math.PI,!1),t.ctx.fillStyle="white",t.ctx.lineWidth=2,t.ctx.strokeStyle=a.borderColor,t.ctx.fill(),t.ctx.stroke())}},interpolateValues:function(t){for(var e=0;e<t.data.datasets.length;e++){var a=t.data.datasets[e],s=t.getDatasetMeta(e),i=t.scales[s.xAxisID].getValueForPixel(t.crosshair.x);if(!s.hidden&&a.interpolate){var o=a.data,r=o.findIndex(function(t){return t.x>=i}),n=o[r-1],l=o[r];if(t.data.datasets[e].steppedLine&&n)a.interpolatedValue=n.y;else if(n&&l){var c=(l.y-n.y)/(l.x-n.x);a.interpolatedValue=n.y+(i-n.x)*c}else a.interpolatedValue=NaN}}}},e.plugins.register(a)});
